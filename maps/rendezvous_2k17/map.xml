<?xml version="1.0" encoding="UTF-8"?>
<map name="Rendezvous 2k17" version="1.0.0">
    <include src="defaults.xml"/>
    <include src="Shared/reward-one-gap.xml"/>
    <include src="Shared/phases-dtc.xml"/>
    <authors>
        <author uuid="44df6b20168f4389b7ac434518207c2f"/> <!-- ParaPenguin -->
        <author uuid="0e56116560bf49e6aa383db002ad7d08"/> <!-- AbusiveUser -->
        <author uuid="bf3319534f9243ee8abc7544b8234936"/> <!-- Oystervice -->
    </authors>
    <teams>
        <team id="blue" color="blue" min="2" max="24">{colors.blue}</team>
        <team id="red" color="red" min="2" max="24">{colors.red}</team>
    </teams>
    <spawns>
        <!-- Spectator spawn -->
        <spawn>
            <regions>
                <point yaw="90">84, 52, -806</point>
            </regions>
        </spawn>
        <!-- Team spawns -->
        <spawn team="red" loadout="default" yaw="0">
            <regions>
                <point yaw="0">23, 61, -903</point>
            </regions>
        </spawn>
        <spawn team="blue" loadout="default" yaw="180">
            <regions>
                <point yaw="180">23, 61, -708</point>
            </regions>
        </spawn>
    </spawns>
    <objectives>
      <leakables materials="obsidian" destroyable="true" first-phase="gold">
        <leakables owner="blue">
          <leakable name="{directions.right}" leak-distance="4" repairable="true">
            <region>
              <cuboid min="-33, 54, -726" max="-37, 58, -722"/>
            </region>
          </leakable>
          <leakable name="{directions.left}" leak-distance="4" repairable="true">
            <region>
              <cuboid min="79, 54, -726" max="83, 58, -722"/>
            </region>
          </leakable>
        </leakables>
        <leakables owner="red">
          <leakable name="{directions.right}" leak-distance="4" repairable="true">
            <region>
              <cuboid min="79, 54, -886" max="83, 58, -890"/>
            </region>
          </leakable>
          <leakable name="{directions.left}" leak-distance="4" repairable="true">
            <region>
              <cuboid min="-33, 54, -886" max="-37, 58, -890"/>
            </region>
          </leakable>
        </leakables>
      </leakables>
    </objectives>
    <loadouts>
        <loadout id="default">
            <helmet material="leather helmet" team-color="true"/>
            <chestplate material="leather chestplate" team-color="true"/>
            <leggings material="iron leggings"/>
            <boots material="leather boots" team-color="true"/>
            <item slot="0" material="iron sword"/>
            <item slot="1" material="bow">
               <enchantment>arrow infinite</enchantment>
            </item>
            <item slot="2" material="diamond pickaxe"/>
            <item slot="3" material="iron axe"/>
            <item slot="4" material="golden apple" amount="3"/>
            <item slot="5" material="log" amount="64"/>
            <item slot="6" material="glass" amount="64"/>
            <item slot="7" material="ladder" amount="32"/>
            <item slot="8" material="bread" amount="48"/>
            <item slot="28" material="arrow" amount="1"/>
        </loadout>
        <loadout id="kill-reward">
           <item material="golden apple"/>
       </loadout>
    </loadouts>
    <kills>
       <rewards>
           <reward loadout="kill-reward"/>
       </rewards>
    </kills>

    <damage>
       <disable>
         <all>
             <damage>fall</damage>
             <inside>
                <region>
                  <join>
                   <cuboid min="21, 61, -890" max="25, 54, -886"/>
                   <cuboid min="25, 61, -722" max="21, 54, -726"/>
                  </join>
                </region>
             </inside>
         </all>
       </disable>
    </damage>

    <phases countdown-message="{phases.transition}" fail-message="{phases.cores.fail}">
        <phase id="gold" success-message="{phases.core.gold}" delay="25m" pass-phase="glass">
            ^eGold
            <materials>
                <material find="obsidian" replace="gold block"/>
            </materials>
        </phase>
        <phase id="glass" success-message="{phases.core.glass}" delay="20m">
            Glass
            <materials>
                <material find="gold block" replace="glass"/>
            </materials>
        </phase>
    </phases>

    <zones>
        <zone modify="never">
            <region>
                <invert>
                    <cuboid min="92, 0, -716" max="73, 63, -732"/>
                    <cuboid min="-17, 0, -716" max="-44, 63, -732"/>
                    <cuboid min="-44, 0, -880" max="-17, 63, -896"/>
                    <cuboid min="63, 0, -896" max="90, 63, -880"/>
                    <cuboid min="73, 0, -880" max="-27, 63, -732"/>
                    <sphere origin="23, 60, -724" radius="9"/>
                    <sphere origin="23, 60, -888" radius="9"/>
                </invert>
            </region>
            <message>{errors.outside-map}</message>
        </zone>
        <zone modify="never">
            <region>
                 <cylinder base="23, 0, -888" radius="39" height="3"/>
                 <cylinder base="23, 0, -724" radius="39" height="3"/>
            </region>
            <message>{errors.outside-map}</message>
        </zone>
        <zone modify="never">
            <region>
                <sphere origin="23, 60, -708" radius="4"/>
            </region>
            <enter>
                <team>blue</team>
            </enter>
            <message>{errors.spawn-restricted}</message>
        </zone>
        <zone modify="never">
            <region>
                <sphere origin="23, 60, -904" radius="4"/>
            </region>
            <enter>
                <team>red</team>
            </enter>
            <message>{errors.spawn-restricted}</message>
        </zone>
        <zone modify="never">
            <region>
                <cuboid min="26, 45, -845" max="20, 58, -870"/>
            </region>
            <message>{errors.cannot-build}</message>
        </zone>
        <zone modify="never">
            <region>
                <cuboid min="66, 45, -891" max="41, 58, -885"/>
            </region>
            <message>{errors.cannot-build}</message>
        </zone>
        <zone modify="never">
            <region>
                <cuboid min="-20, 45, -891" max="5, 58, -885"/>
            </region>
            <message>{errors.cannot-build}</message>
        </zone>
        <zone modify="never">
            <region>
                <cuboid min="20, 45, -767" max="26, 58, -742"/>
            </region>
            <message>{errors.cannot-build}</message>
        </zone>
        <zone modify="never">
            <region>
                <cuboid min="-20, 45, -721" max="5, 58, -727"/>
            </region>
            <message>{errors.cannot-build}</message>
        </zone>
        <zone modify="never">
            <region>
                <cuboid min="66, 45, -727" max="41, 58, -721"/>
            </region>
            <message>{errors.cannot-build}</message>
        </zone>
        <zone modify="never">
            <region>
                <cuboid min="22, 54, -716" max="24, 60, -715"/>
            </region>
            <message>{errors.cannot-build}</message>
        </zone>
        <zone modify="never">
            <region>
                <cuboid min="24, 54, -896" max="22, 60, -897"/>
            </region>
            <message>{errors.cannot-build}</message>
        </zone>
    </zones>

    <world>
      <storm>false</storm>
      <weather check="always"/>
    </world>
    <items>
        <remove-drops>
            <any>
                <material>leather helmet</material>
                <material>leather chestplate</material>
                <material>iron leggings</material>
                <material>leather boots</material>
                <material>bread</material>
                <material>bucket</material>
                <material>golden apple</material>
            </any>
        </remove-drops>
        <repair-tools>
            <any>
                <material>iron sword</material>
                <material>bow</material>
                <material>diamond pickaxe</material>
                <material>iron axe</material>
            </any>
        </repair-tools>
    </items>
</map>
